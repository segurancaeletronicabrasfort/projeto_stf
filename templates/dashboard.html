<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard - Portal ABV</title>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link rel="stylesheet" href="/static/style.css">
</head>
<body class="dashboard-body">

    <nav class="navbar">
        <div class="nav-brand">Portal <strong>ABV</strong></div>
        <div class="nav-user">
            <span id="userDisplayName">Olá, Usuário</span>
            
            <button id="btnSettings" class="btn-logout" style="margin-right:5px;">
                <i class="fas fa-cog"></i> Config
            </button>
            
            <button id="btnLogout" class="btn-logout">
                <i class="fas fa-sign-out-alt"></i> Sair
            </button>
        </div>
    </nav>

    <div class="main-content">
        
        <section class="section-container">
            <h3><i class="fas fa-clipboard-list"></i> Serviços Rápidos (Solicita Fácil)</h3>
            <p class="subtitle">Acesso direto aos formulários do PerformanceLab.</p>
            
            <div class="cards-grid">
                <a href="https://pro.brasfort.com.br/v4/solicita_facil/formulario_resposta.php?token=e2e5096d574976e8f115a8f1e0ffb52b" target="_blank" class="card-action">
                    <div class="icon-box"><i class="fas fa-tools"></i></div>
                    <h4>Abertura de Chamado</h4>
                    <p>Manutenção predial e técnica.</p>
                </a>

                <a href="https://pro.brasfort.com.br/v4/solicita_facil/formulario_resposta.php?empresa=5c50b4df4b176845cd235b6a510c6903&etiqueta=80&site=276883" target="_blank" class="card-action">
                    <div class="icon-box"><i class="fas fa-user-shield"></i></div>
                    <h4>Segurança Eletrônica</h4>
                    <p>Solicitação de imagens e acessos.</p>
                </a>

                <a href="https://pro.brasfort.com.br/v4/solicita_facil/formulario_resposta.php?token=6a0724f1d3e80fd5f761cacb7efe8593" target="_blank" class="card-action">
                    <div class="icon-box"><i class="fas fa-laptop-medical"></i></div>
                    <h4>Suporte TI</h4>
                    <p>Problemas com hardware ou rede.</p>
                </a>
                
                 <a href="https://pro.brasfort.com.br/v4/solicita_facil/formulario_resposta.php?token=65d90fc6d307590b14e9e1800d4e8eab" target="_blank" class="card-action">
                    <div class="icon-box"><i class="fas fa-file-contract"></i></div>
                    <h4>Gestão de Contratos</h4>
                    <p>Acesso a documentos administrativos.</p>
                </a>
            </div>
        </section>

        <section id="biSection" class="section-container">
            <div class="header-split">
                <h3><i class="fas fa-chart-line"></i> Indicadores de Gestão</h3>
                <button class="btn-secondary"><i class="fas fa-sync"></i> Atualizar Dados</button>
            </div>
            
            <div class="bi-container">
                <iframe 
                    title="Dashboad Monitoramento" 
                    width="100%" 
                    height="600" 
                    src="https://app.powerbi.com/view?r=eyJrIjoiYTNhOTM2MTItYWYwNi00MGQ5LTljOTktZjcyYjNlZDM5NWIyIiwidCI6IjY3ZDVkMzczLWE2YjAtNGE4Yi1iZDEzLTNhNWM3ZDdlY2ZhNyJ9" 
                    frameborder="0" 
                    allowFullScreen="true">
                </iframe>
            </div>
        </section>

    </div>

    <div id="settingsModal" class="modal-overlay" style="display: none;">
        <div class="modal-box">
            <div class="modal-header">
                <h3><i class="fas fa-cogs"></i> Gestão de Conta</h3>
                <span class="close-modal" onclick="closeModal('settingsModal')">&times;</span>
            </div>
            
            <div class="modal-body">
                
                <div class="config-section">
                    <h4>Alterar Minha Senha</h4>
                    <form id="changePasswordForm">
                        <div class="field">
                            <label>Senha Atual</label>
                            <input type="password" id="oldPass" required>
                        </div>
                        <div class="field">
                            <label>Nova Senha</label>
                            <input type="password" id="newPass" required>
                        </div>
                        <button type="submit" class="btn-save" style="width: 100%; margin-top: 10px;">Atualizar Senha</button>
                    </form>
                </div>

                <hr style="margin: 20px 0; border: 0; border-top: 1px solid #eee;">

                <div id="adminArea" style="display: none;">
                    <h4 style="color: var(--primary-color);"><i class="fas fa-user-plus"></i> Criar Novo Usuário (Admin)</h4>
                    <form id="createUserForm" style="background: #f8fafc; padding: 15px; border-radius: 8px;">
                        <div class="field">
                            <label>Nome Completo</label>
                            <input type="text" id="newFullname" placeholder="Ex: Maria Silva" required>
                        </div>
                        <div class="field">
                            <label>Usuário (Login)</label>
                            <input type="text" id="newUsername" placeholder="Ex: maria.silva" required>
                        </div>
                        <div class="field">
                            <label>Senha Inicial</label>
                            <input type="password" id="newUserPass" required>
                        </div>
                        
                        <div class="field">
                            <label>Nível de Acesso</label>
                            <select id="newUserRole" style="width: 100%; padding: 10px; border-radius: 8px; border: 1px solid #ccc;">
                                <option value="solicitante">Solicitante (Apenas Solicita Fácil)</option>
                                <option value="supervisor">Supervisor (Vê Power BI)</option>
                                <option value="admin">Administrador (Total)</option>
                            </select>
                        </div>
                        
                        <button type="submit" class="btn-save" style="background-color: #16a34a; width: 100%; margin-top: 10px;">
                            <i class="fas fa-plus-circle"></i> Criar Usuário
                        </button>
                    </form>
                </div>

            </div>
        </div>
    </div>

    <script src="/static/script.js"></script>
</body>
</html>